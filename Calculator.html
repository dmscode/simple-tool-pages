<!DOCTYPE html><html lang="zh"><head><meta charset="UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><title>快速计算器</title><style>#input,#output{display:block;width:60%;min-width:380px;max-width:720px;margin:10px auto;padding:10px 30px;font-size:1.8rem;line-height:1.8em}#input{border:none;border-bottom:2px solid rgba(0,0,0,.6);outline:0}</style></head><body><input type="text" id="input" /><div id="output"><p>点击页面获取焦点后，直接在键盘上输入计算式，一般无需切换输入法。回车可存入历史，并开启新的运算。</p></div><script>window.onload=function(){const input=document.getElementById("input"),output=document.getElementById("output");input.focus(),input.onblur=function(){input.focus()};const computeInput=function(inputText){let res="";try{res=eval(inputText.replace(/%/g,"/100"))}catch(error){res="算式有误"}return void 0===res?"无结果":res};input.onkeyup=function(event){const inputText=input.value.replace(/[\\s，。]+/g,"").replace(/[（[【{]/g,"(").replace(/[）\\]】}]/g,")").replace(/、/g,"/");if(output.querySelector("p:last-child").innerText=inputText.replace(/\\*/g,"×").replace(/\\/ /g,"÷")+" = "+computeInput(inputText),inputText.length&&13===event.keyCode){const newLine=document.createElement("p");output.appendChild(newLine),input.value=""}}};</script></body></html>